(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{15:function(e,t,c){},16:function(e,t,c){},18:function(e,t,c){},20:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(4),o=c.n(r),s=(c(15),c(3)),i=(c(16),c(17),c(5)),u=(c(18),c(1));function l(e){var t=e.onSubmit,c=Object(n.useState)(""),a=Object(s.a)(c,2),r=a[0],o=a[1];return Object(u.jsx)("header",{className:"Searchbar",children:Object(u.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r),o("")):i.b.warn("You have to type something!")},children:[Object(u.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(u.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(u.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})}var j=c(9),b=(c(20),c(21),c(10)),d=c.n(b),m=(c(42),function(e){var t=e.id,c=e.url,n=e.tags,a=e.largeImgUrl;return Object(u.jsx)("li",{className:"ImageGalleryItem",children:Object(u.jsx)("img",{src:c,alt:n,className:"ImageGalleryItem-image","data-url":a})},t)});c(43);var h=function(e){var t=e.onClick;return Object(u.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load More"})};var f={fetchPictures:function(e,t){return fetch("".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(e,"&page=").concat(t,"&per_page=12&key=").concat("19201386-219bb908558d098454af3ef41")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something is wrong, please try again"))}))}};c(44);function O(e){var t=e.onClose,c=e.src,a=e.alt,r=function(e){"Escape"===e.code&&t()};Object(n.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));return Object(u.jsx)("div",{className:"Overlay",onClick:function(e){e.target===e.currentTarget&&t()},children:Object(u.jsx)("div",{className:"Modal",children:Object(u.jsx)("img",{src:c,alt:a})})})}var g="idle",p="pending",v="resolved",x="rejected",S=document.querySelector("#modal-root");function y(e){var t=e.onLoadMore,c=e.query,a=e.page,o=Object(n.useState)(null),l=Object(s.a)(o,2),b=l[0],y=l[1],w=Object(n.useState)(g),N=Object(s.a)(w,2),k=N[0],C=N[1],F=Object(n.useState)([]),E=Object(s.a)(F,2),I=E[0],L=E[1],M=Object(n.useState)({url:"",alt:""}),q=Object(s.a)(M,2),P=q[0],T=q[1],U=Object(n.useState)(!1),B=Object(s.a)(U,2),G=B[0],R=B[1],D=Object(n.useRef)(!0);Object(n.useEffect)((function(){D.current?D.current=!1:(C(p),J())}),[c]),Object(n.useEffect)((function(){1!==a&&J()}),[a]);var J=function(){f.fetchPictures(c,a).then((function(e){L(1===a?e.hits:function(t){return[].concat(Object(j.a)(t),Object(j.a)(e.hits))}),C(v),1!==a&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){y(e),C(x)}))},_=function(){R((function(e){return!e}))};return"idle"===k?Object(u.jsx)("div",{className:"message",children:"Let's find some nice pictures!"}):"pending"===k?Object(u.jsx)(d.a,{type:"ThreeDots",color:"#00BFFF",height:120,width:120,style:{textAlign:"center"}}):"rejected"===k?i.b.error(b):"resolved"===k?Object(u.jsxs)(u.Fragment,{children:[I.length>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:"ImageGallery",onClick:function(e){var t=e.target.dataset.url,c=e.target.alt;T({url:t,alt:c}),_()},children:I.map((function(e){return Object(u.jsx)(m,{id:"".concat(e.id),url:e.webformatURL,tags:e.tags,largeImgUrl:e.largeImageURL})}))}),Object(u.jsx)(h,{onClick:t})]}):Object(u.jsx)("div",{className:"message",children:"Nothing has been found"}),G&&Object(r.createPortal)(Object(u.jsx)(O,{src:P.url,alt:P.alt,onClose:_}),S)]}):Object(u.jsx)("div",{className:"message",children:"We didn't find such picture..."})}function w(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(1),o=Object(s.a)(r,2),j=o[0],b=o[1];return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(l,{onSubmit:function(e){a(e),b(1)}}),Object(u.jsx)(y,{onLoadMore:function(){b((function(e){return e+1}))},query:c,page:j}),Object(u.jsx)(i.a,{autoClose:3e3})]})}o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.c8bb4306.chunk.js.map