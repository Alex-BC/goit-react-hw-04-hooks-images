{"version":3,"sources":["components/Searchbar/Serachbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Button/Button.jsx","services/pixabay-api.js","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","App.js","index.js"],"names":["SearchBar","onSubmit","useState","input","setInput","className","event","preventDefault","trim","toast","warn","type","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","toLowerCase","ImageGalleryItem","id","url","tags","largeImgUrl","src","alt","data-url","Button","onClick","API","fetchPictures","query","page","fetch","then","res","ok","json","Promise","reject","Error","Modal","onClose","handleKeyDown","e","code","useEffect","window","addEventListener","removeEventListener","target","Status","modalRoot","document","querySelector","ImageGallery","onLoadMore","errorMsg","setErrorMsg","status","setStatus","pictures","setPictures","largeImg","setLargeImg","modal","setModal","isFirstRender","useRef","current","hits","prevPictures","scrollTo","top","documentElement","scrollHeight","behavior","catch","error","toggleModal","color","height","width","style","textAlign","length","imgSrc","dataset","map","picture","webformatURL","largeImageURL","createPortal","App","setQuery","setPage","searchQuery","prevPage","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c8bb4306.chunk.js","sourcesContent":["import \"./SearchbarStyles.css\";\nimport React, { useState } from \"react\";\n\nimport { toast } from \"react-toastify\";\nimport PropTypes from \"prop-types\";\n\nexport default function SearchBar({ onSubmit }) {\n  const [input, setInput] = useState(\"\");\n\n  const handleNameChange = (event) => {\n    setInput(event.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (input.trim() === \"\") {\n      toast.warn(\"You have to type something!\");\n      return;\n    }\n    onSubmit(input);\n    setInput(\"\");\n  };\n\n  return (\n    <header className=\"Searchbar\">\n      <form className=\"SearchForm\" onSubmit={handleSubmit}>\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n\n        <input\n          className=\"SearchForm-input\"\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={input}\n          onChange={handleNameChange}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchBar.propTypes = { onSubmit: PropTypes.func };\n","import \"./ImageGalleryItemStyles.css\";\nimport PropTypes from \"prop-types\";\n\nconst ImageGalleryItem = ({ id, url, tags, largeImgUrl }) => {\n  return (\n    <li className=\"ImageGalleryItem\" key={id}>\n      <img\n        src={url}\n        alt={tags}\n        className=\"ImageGalleryItem-image\"\n        data-url={largeImgUrl}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.string,\n  url: PropTypes.string,\n  tags: PropTypes.string,\n  largeImgUrl: PropTypes.string,\n};\n","import \"./ButtonStyles.css\";\nimport PropTypes from \"prop-types\";\n\nfunction Button({ onClick }) {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={onClick}>\n      Load More\n    </button>\n  );\n}\n\nexport default Button;\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","function fetchPictures(query, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '19201386-219bb908558d098454af3ef41';\n  return fetch(\n    `${BASE_URL}?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=${API_KEY}`,\n  ).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error('Something is wrong, please try again'));\n  });\n}\n\nconst API = {\n  fetchPictures,\n};\n\nexport default API;\n","import \"./ModalStyles.css\";\nimport React, { useEffect } from \"react\";\n\nimport PropTypes from \"prop-types\";\n\nexport default function Modal({ onClose, src, alt }) {\n  const handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      onClose();\n    }\n  };\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  });\n  const hadleBackdropClick = (e) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className=\"Overlay\" onClick={hadleBackdropClick}>\n      <div className=\"Modal\">\n        <img src={src} alt={alt} />\n      </div>\n    </div>\n  );\n}\n\nModal.propTypes = {\n  src: PropTypes.string,\n  alt: PropTypes.string,\n  onClose: PropTypes.func,\n};\n","// Styles\nimport \"./ImageGalleryStyles.css\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { createPortal } from \"react-dom\";\n// Utilities components\nimport { useState, useEffect, useRef } from \"react\";\nimport { toast } from \"react-toastify\";\nimport PropTypes from \"prop-types\";\n\n// Custom Components\nimport Loader from \"react-loader-spinner\";\nimport ImageGalleryItem from \"../ImageGalleryItem\";\nimport Button from \"../Button\";\nimport API from \"../../services/pixabay-api\";\nimport Modal from \"../Modal\";\n\nconst Status = {\n  IDLE: \"idle\",\n  PENDING: \"pending\",\n  RESOLVED: \"resolved\",\n  REJECTED: \"rejected\",\n};\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default function ImageGallery({ onLoadMore, query, page }) {\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [status, setStatus] = useState(Status.IDLE);\n  const [pictures, setPictures] = useState([]);\n  const [largeImg, setLargeImg] = useState({\n    url: \"\",\n    alt: \"\",\n  });\n  const [modal, setModal] = useState(false);\n\n  const isFirstRender = useRef(true);\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    setStatus(Status.PENDING);\n    fetchPictures();\n    // eslint-disable-next-line\n  }, [query]);\n\n  useEffect(() => {\n    if (page === 1) {\n      return;\n    }\n    fetchPictures();\n    // eslint-disable-next-line\n  }, [page]);\n\n  const fetchPictures = () => {\n    API.fetchPictures(query, page)\n      .then((res) => {\n        if (page === 1) {\n          setPictures(res.hits);\n        } else {\n          setPictures((prevPictures) => [...prevPictures, ...res.hits]);\n        }\n\n        setStatus(Status.RESOLVED);\n        if (page !== 1) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: \"smooth\",\n          });\n        }\n      })\n      .catch((error) => {\n        setErrorMsg(error);\n        setStatus(Status.REJECTED);\n      });\n  };\n\n  const handleImageClick = (event) => {\n    const imgSrc = event.target.dataset.url;\n    const alt = event.target.alt;\n    setLargeImg({ url: imgSrc, alt });\n    toggleModal();\n  };\n  const toggleModal = () => {\n    setModal((modal) => !modal);\n  };\n\n  if (status === \"idle\") {\n    return <div className=\"message\">Let's find some nice pictures!</div>;\n  }\n\n  if (status === \"pending\") {\n    return (\n      <Loader\n        type=\"ThreeDots\"\n        color=\"#00BFFF\"\n        height={120}\n        width={120}\n        style={{ textAlign: \"center\" }}\n      />\n    );\n  }\n  if (status === \"rejected\") {\n    return toast.error(errorMsg);\n  }\n\n  if (status === \"resolved\") {\n    return (\n      <>\n        {pictures.length > 0 ? (\n          <>\n            <ul className=\"ImageGallery\" onClick={handleImageClick}>\n              {pictures.map((picture) => (\n                <ImageGalleryItem\n                  id={`${picture.id}`}\n                  url={picture.webformatURL}\n                  tags={picture.tags}\n                  largeImgUrl={picture.largeImageURL}\n                />\n              ))}\n            </ul>\n            <Button onClick={onLoadMore} />\n          </>\n        ) : (\n          <div className=\"message\">Nothing has been found</div>\n        )}\n\n        {modal &&\n          createPortal(\n            <Modal\n              src={largeImg.url}\n              alt={largeImg.alt}\n              onClose={toggleModal}\n            />,\n            modalRoot\n          )}\n      </>\n    );\n  } else {\n    return <div className=\"message\">We didn't find such picture...</div>;\n  }\n}\n\nImageGallery.propTypes = {\n  pictures: PropTypes.array,\n  status: PropTypes.string,\n  error: PropTypes.string,\n  onClick: PropTypes.func,\n  onLoadMore: PropTypes.func,\n};\n","// Styles\nimport \"./App.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\n// Global components\nimport { useState } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\n\n// Local components\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\n\nexport default function App() {\n  const [query, setQuery] = useState(\"\");\n  const [page, setPage] = useState(1);\n\n  const handleSearchSubmit = (searchQuery) => {\n    setQuery(searchQuery);\n    setPage(1);\n  };\n\n  const handleLoadMore = () => {\n    setPage((prevPage) => prevPage + 1);\n  };\n\n  return (\n    <div className=\"container\">\n      <Searchbar onSubmit={handleSearchSubmit} />\n      <ImageGallery onLoadMore={handleLoadMore} query={query} page={page} />\n      <ToastContainer autoClose={3000} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}